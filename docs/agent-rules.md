# StoryLENS エージェント開発ルール

> 最終更新: 2025-01-XX  
> AIエージェント（開発アシスタント）向けの動作ルールとワークフロー

## 基本原則

1. **機能完成時は即座にコミット・プッシュ**
   - 1つの機能が完成したら、すぐにコミット・プッシュする
   - 複数の機能を1つのコミットにまとめない
   - 動作確認が取れた時点でコミットする

2. **明確なコミットメッセージ**
   - 何を実装したか、何を修正したかを明確に記述
   - 日本語で記述（プロジェクトの言語に合わせる）

3. **テスト可能な状態を維持**
   - コミット時点で、その機能が動作する状態を保つ
   - ビルドエラーやリンターエラーを残さない

## コミット・プッシュのルール

### コミットタイミング

以下のいずれかの条件を満たした場合、即座にコミット・プッシュする：

- ✅ **機能の実装が完了した時**
  - 例: 「VideoWallコンポーネントの実装完了」
  - 例: 「認証ページのデザイン更新完了」

- ✅ **バグ修正が完了した時**
  - 例: 「faviconのサイズ修正」
  - 例: 「型エラーの修正」

- ✅ **リファクタリングが完了した時**
  - 例: 「コンポーネントの整理」
  - 例: 「スタイルの統一」

- ✅ **ドキュメントの更新が完了した時**
  - 例: 「デザインシステムドキュメント追加」
  - 例: 「API仕様書の更新」

### コミットメッセージの形式

```
[カテゴリ] 簡潔な説明

詳細な説明（必要に応じて）
```

#### カテゴリ一覧

- `feat`: 新機能の追加
- `fix`: バグ修正
- `style`: スタイル・デザインの変更
- `refactor`: リファクタリング
- `docs`: ドキュメントの更新
- `chore`: ビルドプロセスやツールの変更
- `design`: デザインシステムの変更

#### コミットメッセージの例

```
[feat] VideoWallコンポーネントの実装

- 無限スクロールアニメーション
- グレースケール→カラー変換のホバー効果
- 上下方向のマーキーアニメーション
```

```
[style] ランディングページのデザイン強化

- Prism Waveセクションの追加
- ヒーローセクションのタイポグラフィ強化
- CTAセクションの追加
```

```
[fix] faviconのサイズと色の修正

- SVGのサイズを512x512に調整
- 色をSignal Red (#cc0000)に変更
```

```
[docs] エージェントルールドキュメントの追加

- コミット・プッシュのルールを定義
- 開発ワークフローの明確化
```

### プッシュのルール

- コミット後は**即座にプッシュ**する
- プッシュ先は `main` ブランチ（または指定されたブランチ）
- プッシュ前に `git status` で状態を確認

## 開発ワークフロー

### 1. 機能実装の流れ

```
1. 要件の理解
   ↓
2. 実装
   ↓
3. 動作確認
   ↓
4. コミット・プッシュ ← ここで必ずコミット
   ↓
5. 次の機能へ
```

### 2. 複数機能を実装する場合

各機能を**個別にコミット・プッシュ**する：

```
[feat] 機能Aの実装
→ プッシュ

[feat] 機能Bの実装
→ プッシュ

[feat] 機能Cの実装
→ プッシュ
```

**NG例**: 機能A、B、Cを1つのコミットにまとめる

### 3. エラー修正の流れ

```
1. エラーの特定
   ↓
2. 修正
   ↓
3. 動作確認
   ↓
4. コミット・プッシュ ← 即座にコミット
```

## コミット前のチェックリスト

コミット前に以下を確認：

- [ ] ビルドエラーがない（`npm run build` が成功する）
- [ ] リンターエラーがない（`npm run lint` が成功する）
- [ ] 型エラーがない（TypeScriptのコンパイルが成功する）
- [ ] 動作確認が完了している
- [ ] 不要なファイルがコミットに含まれていない（`.env.local`など）

## ブランチ戦略

### 基本方針

- **mainブランチ**: 本番環境用
- **developブランチ**: 開発用（必要に応じて）
- **feature/機能名**: 機能開発用（必要に応じて）

### デフォルト

MVP開発中は **mainブランチ** に直接コミット・プッシュでOK

## ファイル管理

### コミットすべきファイル

- ✅ ソースコード（`.ts`, `.tsx`, `.js`, `.jsx`）
- ✅ スタイルファイル（`.css`, `.scss`）
- ✅ 設定ファイル（`package.json`, `tsconfig.json`など）
- ✅ ドキュメント（`docs/`配下）
- ✅ 画像・アセット（`public/`配下、必要に応じて）

### コミットすべきでないファイル

- ❌ `.env.local`（環境変数）
- ❌ `.next/`（ビルド成果物）
- ❌ `node_modules/`（依存関係）
- ❌ `.DS_Store`（macOSのシステムファイル）
- ❌ 個人のメモファイル

## エージェントの動作ルール

### 実装時のルール

1. **1機能1コミット**
   - 1つの機能が完成したら、即座にコミット・プッシュ
   - 次の機能に進む前に必ずコミット

2. **動作確認**
   - 実装後は必ず動作確認
   - エラーがあれば修正してからコミット

3. **ドキュメント更新**
   - 新機能追加時は関連ドキュメントも更新
   - ドキュメント更新も別コミットで

### コミット・プッシュの実行

エージェントは以下のコマンドを実行してコミット・プッシュする：

```bash
# ステージング
git add .

# コミット（適切なメッセージで）
git commit -m "[カテゴリ] 簡潔な説明"

# プッシュ
git push origin main
```

### エラー時の対応

- **ビルドエラー**: 修正してからコミット
- **リンターエラー**: 修正してからコミット
- **型エラー**: 修正してからコミット
- **コンフリクト**: 解決してからコミット

## コミット頻度の目安

- **機能実装**: 1機能 = 1コミット
- **バグ修正**: 1修正 = 1コミット
- **ドキュメント**: 1更新 = 1コミット
- **リファクタリング**: 1単位 = 1コミット

**原則**: こまめにコミット・プッシュする

## 例外ルール

以下の場合は、複数の変更を1つのコミットにまとめてもOK：

- 同じファイル内の小さな修正（タイポ、フォーマットなど）
- 関連する小さな変更（同じ機能の細かい調整）

ただし、**機能が完成した時点では必ずコミット**する。

## コミットメッセージのベストプラクティス

### ✅ 良い例

```
[feat] VideoWallコンポーネントの実装

- 無限スクロールアニメーション
- グレースケール→カラー変換のホバー効果
- 上下方向のマーキーアニメーション
```

```
[style] ランディングページのデザイン強化

- Prism Waveセクションの追加
- ヒーローセクションのタイポグラフィ強化
- CTAセクションの追加
```

### ❌ 悪い例

```
更新
```

```
fix
```

```
いろいろ修正
```

## まとめ

- **機能完成 = 即座にコミット・プッシュ**
- **1機能 = 1コミット**
- **明確なコミットメッセージ**
- **動作確認後にコミット**
- **こまめにコミット・プッシュ**

このルールに従って、開発を進めてください。








